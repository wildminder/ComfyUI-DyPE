# ComfyUI-DyPE Learnings

- Added structured diagnostics for Qwen CLIP encoders that do not expose a `transformer.model`. The exception now surfaces the object's key attributes, walks nested candidates (e.g., `clip.cond_stage_model._modules['clip']`), and emits the same snapshot via logging to help track down alternative attachment points when integrating unfamiliar CLIP implementations. The patcher now also traverses those same paths automatically to locate the first compatible transformer before giving up, and both DyPE nodes log INFO-level summaries of the parameters applied each time they run.
- Refactored the spatial patch pipeline so Qwen Image gains a dedicated DyPE node. The new embedder mirrors `EmbedND` output while applying YaRN/NTK scaling per-axis and syncing its dynamic schedule with the sampler wrapper. Noise-shift parameters are interpolated from the requested resolution, letting us expand Qwen’s rotary cache coherently at multi-megapixel targets.
- Added per-axis INFO logging inside the Qwen spatial embedder so we can trace the effective base/target grid lengths, DyPE ramp factor, and YaRN/NTK scaling parameters whenever artifacts appear at extreme resolutions. A dedicated console handler is installed by default, which means users immediately see the diagnostics while reproducing issues.
- Ported the alternative PR’s best ideas: auto-detect the Qwen checkpoint’s patch geometry, gate DyPE with editing-aware tapers, and fall back gracefully when the sampler isn’t Flux-based. The spatial embedder now picks device-friendly dtypes, logs editing state, and the README documents the new controls.
